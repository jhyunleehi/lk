# Memory Management

## 1. Program & Process

### Process



![image-20220116225658818](img/image-20220116225658818.png)



### Process Memory Map



![image-20220116230418066](img/image-2022011623041806622.png)



#### Kernel memory map

* user program cannot access kernel memory area
* 왜 0xFE00 0000 일까?  0x100 0000

![image-20220116230559328](img/image-20220116230559328.png)



## 2. system call



![image-20220116230654098](img/image-20220116230654098.png)



#### system call trap handler



![image-20220116230720925](img/image-20220116230720925.png)



#### system call vs procedure call



![image-20220116230837413](img/image-20220116230837413.png)





![image-20220116231147695](img/image-20220116231147695.png)





![image-20220116231204190](img/image-20220116231204190.png)

![image-20220116231226996](img/image-20220116231226996.png)

#### monolithic structure

![image-20220116231317151](img/image-20220116231317151.png)



#### microkernel

![image-20220116231400189](img/image-20220116231400189.png)





## 3. Programs Memory

### process



![image-20220116232049730](img/image-20220116232049730.png)



### Sharing RAM



![image-20220116232231033](img/image-20220116232231033.png)



![image-20220116232328969](img/image-20220116232328969.png)



![image-20220116232346999](img/image-20220116232346999.png)



![image-20220116232459488](img/image-20220116232459488.png)



![image-20220116232658624](img/image-20220116232658624.png)





## 4. Virtual Memory



![image-20220116232807213](img/image-20220116232807213.png)





![image-20220116232832787](img/image-20220116232832787.png)



![image-20220116232936054](img/image-20220116232936054.png)





Do we really need to load all blocks into memory before the process starts executing?

![image-20220116233052633](img/image-20220116233052633.png)



![image-20220116233242547](img/image-20220116233242547.png)





![image-20220116233456595](img/image-20220116233456595.png)



* dirty bit 



![image-20220116233550884](img/image-20220116233550884.png)



## 5. Virtual Address Space of a process

![image-20220116233748719](img/image-20220116233748719.png)





![image-20220116234843428](img/image-20220116234843428.png)





![image-20220116235109522](img/image-20220116235109522.png)





![image-20220116235218987](img/image-20220116235218987.png)





![image-20220116235314799](img/image-20220116235314799.png)



![image-20220116235426048](img/image-20220116235426048.png)



## 6. Working of virtual memory



![image-20220116235521694](img/image-20220116235521694.png)





![image-20220116235618089](img/image-20220116235618089.png)



![image-20220116235706476](img/image-20220116235706476.png)





![image-20220116235728978](img/image-20220116235728978.png)



![image-20220116235825235](img/image-20220116235825235.png)



![image-20220116235857332](img/image-20220116235857332.png)





## 7. Segmentation & Fragmentation



 ![image-20220117001335075](img/image-20220117001335075.png)





![image-20220117001756705](img/image-20220117001756705.png)



![image-20220117001923466](img/image-20220117001923466.png)







![image-20220117002001471](img/image-20220117002001471.png)





![image-20220117002205500](img/image-20220117002205500.png)





![image-20220117002302554](img/image-20220117002302554.png)





![image-20220117002354375](img/image-20220117002354375.png)



![image-20220117002430371](img/image-20220117002430371.png)





![image-20220117002719011](img/image-20220117002719011.png)



![image-20220117002743465](D:\Code\lk\xv6.memory_management\img\image-20220117002743465.png)





![image-20220117002928648](img/image-20220117002928648.png)





![image-20220117003032063](img/image-20220117003032063.png)



* 결국 ELF 프로그램이 메모리에 로딩되어서 어떻게 실행되고 가상 주소가 물리 주소에 매핑 되는가에 대한 것이 정리된다.



## 8. XV6 Memory management





![image-20220117003251456](img/image-20220117003251456.png)







![image-20220117003438346](img/image-20220117003438346.png)







![image-20220117003637784](img/image-20220117003637784.png)





![image-20220117003727995](img/image-20220117003727995.png)





![image-20220117003829985](img/image-20220117003829985.png)



![image-20220117003937956](img/image-20220117003937956.png)



![image-20220117004109772](img/image-20220117004109772.png)





![image-20220117004132393](img/image-20220117004132393.png)





![image-20220117004402372](img/image-20220117004402372.png)





![image-20220117004557072](img/image-20220117004557072.png)





![image-20220117004926940](img/image-20220117004926940.png)



![image-20220117005329113](img/image-20220117005329113.png)



![image-20220117005137728](img/image-20220117005137728.png)



![image-20220117005208442](img/image-20220117005208442.png)





![image-20220117005241861](img/image-20220117005241861.png)





![image-20220117005650859](img/image-20220117005650859.png)





![image-20220117005745207](img/image-20220117005745207.png)



![image-20220117005815815](img/image-20220117005815815.png)



![image-20220117005839954](img/image-20220117005839954.png)



![image-20220117010128907](img/image-20220117010128907.png)



![image-20220117010143435](img/image-20220117010143435.png)



![image-20220117010206096](img/image-20220117010206096.png)



## 9. Allocating Page



![image-20220117010438081](img/image-20220117010438081.png)





![image-20220117010539993](img/image-20220117010539993.png)
### Code Path names

경로 이름 조회에는 각 경로 구성 요소에 대해 하나씩 dirlookup에 대한 연속적인 호출이 포함됩니다. Namei(5540)는 경로를 평가하고 해당 inode를 반환합니다. nameiparent 함수는 변형입니다: 마지막 요소 앞에서 멈추고 상위 디렉토리의 inode를 반환하고 마지막 요소를 name으로 복사합니다. 둘 다 실제 작업을 수행하기 위해 일반화된 함수 namex를 호출합니다.

Namex(5505)는 경로 평가가 시작되는 위치를 결정하는 것으로 시작합니다. 경로가 슬래시로 시작하는 경우 평가는 루트에서 시작됩니다. 그렇지 않으면 현재 디렉토리(5509-5512). 그런 다음 skipelem을 사용하여 경로의 각 요소를 차례로 고려합니다(5514). 루프의 각 반복은 현재 inode ip에서 이름을 조회해야 합니다. 반복은 ip를 잠그고 디렉터리인지 확인하는 것으로 시작됩니다. 그렇지 않으면 조회가 실패합니다(5515-5519).
(IP 잠금은 ip->type이 변경될 수 있기 때문에 필요한 것이 아니라 ilock이 실행될 때까지 ip->type이 디스크에서 로드되었다는 보장이 없기 때문입니다.) 호출이 nameiparent이고 이것이 마지막 경로 요소, 루프는 nameiparent의 정의에 따라 일찍 중지됩니다. 

최종 경로 요소는 이미 name으로 복사되었으므로 namex는 잠금 해제된 IP(5520-5524)만 반환하면 됩니다. 마지막으로 루프는 dirlookup을 사용하여 경로 요소를 찾고 ip =next(5525-5530)를 설정하여 다음 반복을 준비합니다. 루프에 경로 요소가 부족하면 ip를 반환합니다.